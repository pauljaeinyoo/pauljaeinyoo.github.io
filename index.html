<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookFlow - Premium Book Store</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Braze SDK -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js');
        }

        +function(a,p,P,b,y){
            a.braze={};a.brazeQueue=[];
            const s="BrazeSdkMetadata DeviceProperties Card Card.prototype.dismissCard Card.prototype.removeAllSubscriptions Card.prototype.removeSubscription Card.prototype.subscribeToClickedEvent Card.prototype.subscribeToDismissedEvent Card.fromContentCardsJson ImageOnly CaptionedImage ClassicCard ControlCard ContentCards ContentCards.prototype.getUnviewedCardCount Feed Feed.prototype.getUnreadCardCount ControlMessage InAppMessage InAppMessage.SlideFrom InAppMessage.ClickAction InAppMessage.DismissType InAppMessage.OpenTarget InAppMessage.ImageStyle InAppMessage.Orientation InAppMessage.TextAlignment InAppMessage.CropType InAppMessage.prototype.closeMessage InAppMessage.prototype.removeAllSubscriptions InAppMessage.prototype.removeSubscription InAppMessage.prototype.subscribeToClickedEvent InAppMessage.prototype.subscribeToDismissedEvent InAppMessage.fromJson FullScreenMessage ModalMessage HtmlMessage SlideUpMessage User User.Genders User.NotificationSubscriptionTypes User.prototype.addAlias User.prototype.addToCustomAttributeArray User.prototype.addToSubscriptionGroup User.prototype.getUserId User.prototype.incrementCustomUserAttribute User.prototype.removeFromCustomAttributeArray User.prototype.removeFromSubscriptionGroup User.prototype.setCountry User.prototype.setCustomLocationAttribute User.prototype.setCustomUserAttribute User.prototype.setDateOfBirth User.prototype.setEmail User.prototype.setEmailNotificationSubscriptionType User.prototype.setFirstName User.prototype.setGender User.prototype.setHomeCity User.prototype.setLanguage User.prototype.setLastKnownLocation User.prototype.setLastName User.prototype.setPhoneNumber User.prototype.setPushNotificationSubscriptionType InAppMessageButton InAppMessageButton.prototype.removeAllSubscriptions InAppMessageButton.prototype.removeSubscription InAppMessageButton.prototype.subscribeToClickedEvent FeatureFlag FeatureFlag.prototype.getStringProperty FeatureFlag.prototype.getNumberProperty FeatureFlag.prototype.getBooleanProperty automaticallyShowInAppMessages destroyFeed hideContentCards showContentCards showFeed showInAppMessage deferInAppMessage toggleContentCards toggleFeed changeUser destroy getDeviceId initialize isPushBlocked isPushPermissionGranted isPushSupported logCardClick logCardDismissal logCardImpressions logContentCardImpressions logContentCardClick logCustomEvent logFeedDisplayed logInAppMessageButtonClick logInAppMessageClick logInAppMessageHtmlClick logInAppMessageImpression logPurchase openSession requestPushPermission removeAllSubscriptions removeSubscription requestContentCardsRefresh requestFeedRefresh refreshFeatureFlags requestImmediateDataFlush enableSDK isDisabled setLogger setSdkAuthenticationSignature addSdkMetadata disableSDK subscribeToContentCardsUpdates subscribeToFeedUpdates subscribeToInAppMessage subscribeToSdkAuthenticationFailures toggleLogging unregisterPush wipeData handleBrazeAction subscribeToFeatureFlagsUpdates getAllFeatureFlags logFeatureFlagImpression"
            .split(" ");
            for (var i = 0; i < s.length; i++) {
                var m = s[i], k = a.braze, l = m.split(".");
                for (var j = 0; j < l.length - 1; j++) k = k[l[j]];
                k[l[j]] = new Function("return function " + m.replace(/\./g, "_") +
                    "(){window.brazeQueue.push(arguments); return true}")();
            }
            y = p.createElement(P);
            y.type = 'text/javascript';
            y.src = 'https://js.appboycdn.com/web-sdk/5.1/braze.min.js';
            y.async = 1;
            b = p.getElementsByTagName(P)[0];
            b.parentNode.insertBefore(y, b);
        }(window, document, 'script');
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #111111;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation */
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e5e5e5;
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            height: 80px;
        }

        .nav-left .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 800;
            color: #111111;
        }

        .nav-left .logo i {
            color: #ff6b35;
        }

        .nav-center {
            display: flex;
            gap: 40px;
        }

        .nav-link {
            text-decoration: none;
            color: #111111;
            font-weight: 500;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #ff6b35;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -30px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #ff6b35;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: #f5f5f5;
            border-radius: 25px;
            padding: 10px 20px;
            gap: 10px;
        }

        .search-bar input {
            border: none;
            background: none;
            outline: none;
            font-size: 0.9rem;
            width: 200px;
        }

        .search-bar i {
            color: #666;
        }

        .search-clear-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .search-clear-btn:hover {
            background: #e5e5e5;
            color: #333;
        }

        /* Search Results Section */
        .search-results-section {
            background: #f8f9fa;
            padding: 40px 0;
            border-bottom: 1px solid #e5e5e5;
        }

        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .search-results-header h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #111111;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-search-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #666;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-search-btn:hover {
            background: #e5e5e5;
            color: #333;
        }

        .search-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .search-result-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .search-result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .search-result-image {
            height: 200px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }

        .search-result-info {
            padding: 20px;
        }

        .search-result-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #111111;
        }

        .search-result-author {
            color: #666;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .search-result-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 15px;
        }

        .search-result-cta {
            background: #111111;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .search-result-cta:hover {
            background: #ff6b35;
        }

        .nav-actions {
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #111111;
            cursor: pointer;
            position: relative;
            padding: 10px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .nav-btn:hover {
            background: #f5f5f5;
        }

        .cart-count {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ff6b35;
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 100px 0;
            display: flex;
            align-items: center;
            min-height: 600px;
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .hero-content h1 {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 20px;
            line-height: 1.1;
        }

        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 40px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .cta-btn {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cta-btn:hover {
            background: #e55a2b;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
        }

        .hero-image {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .book-stack {
            position: relative;
            width: 300px;
            height: 400px;
        }

        .book {
            position: absolute;
            width: 200px;
            height: 280px;
            border-radius: 5px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .book-1 {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            transform: rotate(-15deg) translateY(20px);
        }

        .book-2 {
            background: linear-gradient(45deg, #667eea, #764ba2);
            transform: rotate(-5deg) translateY(10px);
        }

        .book-3 {
            background: linear-gradient(45deg, #28a745, #20c997);
            transform: rotate(5deg) translateY(0);
        }

        /* Categories Section */
        .categories {
            padding: 100px 0;
            background: #f8f9fa;
        }

        .categories h2 {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 60px;
            color: #111111;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .category-card {
            background: white;
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .category-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .category-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
            color: white;
        }

        .category-card h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #111111;
        }

        .category-card p {
            color: #666;
            font-size: 1rem;
        }

        /* Featured Books */
        .featured {
            padding: 100px 0;
        }

        .featured h2 {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 60px;
            color: #111111;
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 40px;
        }

        .book-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .book-image {
            height: 350px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            position: relative;
        }

        .book-image::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 5px;
        }

        .book-info {
            padding: 25px;
        }

        .book-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #111111;
        }

        .book-author {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .book-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 20px;
        }

        .add-to-cart-btn {
            background: #111111;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .add-to-cart-btn:hover {
            background: #ff6b35;
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
            z-index: 1001;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            padding: 30px;
            border-bottom: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111111;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .cart-items {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .cart-item-image {
            width: 60px;
            height: 80px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 5px;
            flex-shrink: 0;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #111111;
        }

        .cart-item-price {
            color: #ff6b35;
            font-weight: 600;
        }

        .cart-footer {
            padding: 30px;
            border-top: 1px solid #e5e5e5;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111111;
        }

        .checkout-btn {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s ease;
        }

        .checkout-btn:hover {
            background: #e55a2b;
        }

        /* Braze Carousel Section */
        .braze-carousel-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 60px 0;
            color: white;
        }

        .braze-carousel-section .braze-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .braze-carousel-section .braze-header h2 {
            font-size: 2rem;
            font-weight: 600;
            color: white;
        }

        .braze-controls {
            display: flex;
            gap: 10px;
        }

        .braze-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .braze-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .carousel-container {
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
        }

        .braze-carousel {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            min-height: 300px;
        }

        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-slide.active {
            opacity: 1;
        }

        .carousel-content {
            text-align: center;
            max-width: 600px;
        }

        .carousel-content h3 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: white;
        }

        .carousel-content p {
            font-size: 1.1rem;
            margin-bottom: 25px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .carousel-cta {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .carousel-cta:hover {
            background: #e55a2b;
            transform: translateY(-2px);
        }

        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .carousel-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-indicator.active {
            background: white;
            transform: scale(1.2);
        }

        .loading-state {
            text-align: center;
            padding: 60px 20px;
            color: white;
        }

        .loading-state i {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .loading-state h3 {
            color: white;
            margin-bottom: 10px;
        }

        .loading-state p {
            opacity: 0.8;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 15px;
                height: 60px;
            }

            .nav-center {
                display: none;
            }

            .search-bar input {
                width: 150px;
            }

            .search-results-section {
                padding: 30px 0;
            }

            .search-results-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .search-results-header h2 {
                font-size: 1.5rem;
            }

            .search-results-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }

            .search-result-image {
                height: 150px;
            }

            .search-result-info {
                padding: 15px;
            }

            .search-result-title {
                font-size: 1.1rem;
            }

            .braze-carousel-section {
                padding: 40px 0;
            }

            .braze-carousel-section .braze-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .braze-carousel-section .braze-header h2 {
                font-size: 1.5rem;
            }

            .braze-controls {
                flex-wrap: wrap;
                justify-content: center;
            }

            .braze-btn {
                padding: 8px 12px;
                font-size: 0.9rem;
            }

            .carousel-container {
                max-width: 100%;
                padding: 0 15px;
            }

            .braze-carousel {
                min-height: 250px;
            }

            .carousel-slide {
                padding: 30px 20px;
            }

            .carousel-content h3 {
                font-size: 1.4rem;
            }

            .carousel-content p {
                font-size: 1rem;
            }

            .carousel-cta {
                padding: 10px 25px;
                font-size: 0.9rem;
            }

            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 40px;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .book-stack {
                width: 200px;
                height: 300px;
            }

            .book {
                width: 150px;
                height: 200px;
            }

            .category-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
            }

            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo">
                    <i class="fas fa-book-open"></i>
                    <span>BookFlow</span>
                </div>
            </div>
            <div class="nav-center">
                <a href="index.html" class="nav-link active">New & Featured</a>
                <a href="fiction.html" class="nav-link">Fiction</a>
                <a href="non-fiction.html" class="nav-link">Non-Fiction</a>
                <a href="sci-fi.html" class="nav-link">Science Fiction</a>
                <a href="biography.html" class="nav-link">Biography</a>
                <a href="self-help.html" class="nav-link">Self-Help</a>
            </div>
            <div class="nav-right">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search for books..." id="search-input" onkeyup="searchBooks()">
                    <button class="search-clear-btn" onclick="clearSearch()" id="search-clear-btn" style="display: none;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="nav-actions">
                    <button class="nav-btn" onclick="showCart()">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-count" id="cart-count">0</span>
                    </button>
                    <button class="nav-btn" onclick="showUserMenu()">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Search Results Section -->
    <section class="search-results-section" id="search-results-section" style="display: none;">
        <div class="container">
            <div class="search-results-header">
                <h2><i class="fas fa-search"></i> Search Results</h2>
                <button class="close-search-btn" onclick="closeSearchResults()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-results-grid" id="search-results-grid">
                <!-- Search results will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Braze Content Cards Carousel Section -->
    <section class="braze-carousel-section">
        <div class="container">
            <div class="braze-header">
                <h2><i class="fas fa-star"></i> Featured Recommendations</h2>
                <div class="braze-controls">
                    <button class="braze-btn" onclick="previousCard()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="braze-btn" onclick="nextCard()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <button class="braze-btn" onclick="toggleBrazeCards()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            <div class="carousel-container">
                <div id="braze-carousel" class="braze-carousel">
                    <div class="loading-state">
                        <i class="fas fa-satellite-dish"></i>
                        <h3>Loading recommendations...</h3>
                        <p>Finding books just for you</p>
                    </div>
                </div>
                <div class="carousel-indicators" id="carousel-indicators">
                    <!-- Indicators will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div>
                <h1>DISCOVER YOUR NEXT GREAT READ</h1>
                <p>Explore thousands of books across all genres. Find your perfect story.</p>
                <button class="cta-btn" onclick="scrollToFeatured()">
                    SHOP NOW
                </button>
            </div>
            <div class="hero-image">
                <div class="book-stack">
                    <div class="book book-1"></div>
                    <div class="book book-2"></div>
                    <div class="book book-3"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Categories -->
    <section class="categories">
        <div class="container">
            <h2>Shop by Category</h2>
            <div class="category-grid">
                <div class="category-card" onclick="window.location.href='fiction.html'">
                    <div class="category-icon">
                        <i class="fas fa-magic"></i>
                    </div>
                    <h3>Fiction</h3>
                    <p>Imaginative stories</p>
                </div>
                <div class="category-card" onclick="window.location.href='non-fiction.html'">
                    <div class="category-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>Non-Fiction</h3>
                    <p>Real-world knowledge</p>
                </div>
                <div class="category-card" onclick="window.location.href='sci-fi.html'">
                    <div class="category-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3>Science Fiction</h3>
                    <p>Future possibilities</p>
                </div>
                <div class="category-card" onclick="window.location.href='biography.html'">
                    <div class="category-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <h3>Biography</h3>
                    <p>Life stories</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Books -->
    <section class="featured" id="featured">
        <div class="container">
            <h2>Featured Books</h2>
            <div class="books-grid" id="books-grid">
                <!-- Books will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Shopping Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3>Shopping Cart</h3>
            <button class="close-btn" onclick="hideCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be populated by JavaScript -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total">$0.00</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">
                CHECKOUT
            </button>
        </div>
    </div>



    <script>
        // Application State
        let cart = [];
        let books = [];
        let currentCategory = 'all';
        let currentCardIndex = 0;
        let brazeCards = [];
        let carouselInterval;

        // Sample book data
        const sampleBooks = [
            {
                id: 1,
                title: "The Great Gatsby",
                author: "F. Scott Fitzgerald",
                price: 12.99,
                category: "fiction",
                image: "ðŸ“š"
            },
            {
                id: 2,
                title: "To Kill a Mockingbird",
                author: "Harper Lee",
                price: 14.99,
                category: "fiction",
                image: "ðŸ“–"
            },
            {
                id: 3,
                title: "1984",
                author: "George Orwell",
                price: 11.99,
                category: "sci-fi",
                image: "ðŸ”®"
            },
            {
                id: 4,
                title: "Steve Jobs",
                author: "Walter Isaacson",
                price: 16.99,
                category: "biography",
                image: "ðŸ‘¨â€ðŸ’¼"
            },
            {
                id: 5,
                title: "The Art of War",
                author: "Sun Tzu",
                price: 9.99,
                category: "non-fiction",
                image: "âš”ï¸"
            },
            {
                id: 6,
                title: "Dune",
                author: "Frank Herbert",
                price: 15.99,
                category: "sci-fi",
                image: "ðŸœï¸"
            },
            {
                id: 7,
                title: "Pride and Prejudice",
                author: "Jane Austen",
                price: 10.99,
                category: "fiction",
                image: "ðŸ’•"
            },
            {
                id: 8,
                title: "The Hobbit",
                author: "J.R.R. Tolkien",
                price: 13.99,
                category: "fiction",
                image: "ðŸ‰"
            },
            {
                id: 9,
                title: "Foundation",
                author: "Isaac Asimov",
                price: 12.99,
                category: "sci-fi",
                image: "ðŸš€"
            },
            {
                id: 10,
                title: "Einstein: His Life and Universe",
                author: "Walter Isaacson",
                price: 18.99,
                category: "biography",
                image: "ðŸ§ "
            },
            {
                id: 11,
                title: "The Power of Habit",
                author: "Charles Duhigg",
                price: 15.99,
                category: "self-help",
                image: "ðŸ’ª"
            },
            {
                id: 12,
                title: "Atomic Habits",
                author: "James Clear",
                price: 16.99,
                category: "self-help",
                image: "âš›ï¸"
            }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            books = sampleBooks;
            loadBooks();
            initializeBraze();
        });

        function initializeBraze() {
            // Initialize Braze once the SDK is ready
            braze.initialize('7ad461d4-5c54-45a1-a0f2-c018596c87ca', {
                baseUrl: "sondheim.braze.com",
                enableLogging: true,
                allowUserSuppliedJavascript: true
            });

            braze.toggleLogging();
            braze.changeUser('pjy');
            
            braze.openSession(() => {
                braze.requestContentCardsRefresh();
                setupCarousel();
            });

            // Set user attributes
            const user = braze.getUser();
            user.setCustomUserAttribute('app_name', 'BookFlow');
            user.setCustomUserAttribute('total_books', books.length);
        }

        function loadBooks() {
            displayBooks(books);
        }

        function searchBooks() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase().trim();
            const clearBtn = document.getElementById('search-clear-btn');
            const searchResultsSection = document.getElementById('search-results-section');
            
            // Show/hide clear button
            if (searchTerm.length > 0) {
                clearBtn.style.display = 'block';
            } else {
                clearBtn.style.display = 'none';
            }
            
            if (searchTerm === '') {
                // Hide search results if search is empty
                searchResultsSection.style.display = 'none';
                // Show normal books grid
                if (currentCategory === 'all') {
                    displayBooks(books);
                } else {
                    const filteredBooks = books.filter(book => book.category === currentCategory);
                    displayBooks(filteredBooks);
                }
                return;
            }
            
            // Track search with Braze
            braze.logCustomEvent('Book Search', {
                'search_term': searchTerm,
                'current_page': 'home'
            });
            
            // Search across all books from all categories
            const allBooks = [
                // Fiction books
                { id: 1, title: "The Great Gatsby", author: "F. Scott Fitzgerald", price: 12.99, category: "fiction", image: "ðŸ“š" },
                { id: 2, title: "To Kill a Mockingbird", author: "Harper Lee", price: 14.99, category: "fiction", image: "ðŸ“–" },
                { id: 7, title: "Pride and Prejudice", author: "Jane Austen", price: 10.99, category: "fiction", image: "ðŸ’•" },
                { id: 8, title: "The Hobbit", author: "J.R.R. Tolkien", price: 13.99, category: "fiction", image: "ðŸ‰" },
                
                // Non-fiction books
                { id: 5, title: "The Art of War", author: "Sun Tzu", price: 9.99, category: "non-fiction", image: "âš”ï¸" },
                { id: 11, title: "Sapiens", author: "Yuval Noah Harari", price: 18.99, category: "non-fiction", image: "ðŸ§ " },
                { id: 12, title: "The Power of Habit", author: "Charles Duhigg", price: 15.99, category: "non-fiction", image: "ðŸ”„" },
                { id: 13, title: "Atomic Habits", author: "James Clear", price: 16.99, category: "non-fiction", image: "âš›ï¸" },
                { id: 14, title: "Thinking, Fast and Slow", author: "Daniel Kahneman", price: 17.99, category: "non-fiction", image: "ðŸ§­" },
                { id: 15, title: "The 7 Habits of Highly Effective People", author: "Stephen R. Covey", price: 14.99, category: "non-fiction", image: "ðŸ“ˆ" },
                
                // Science Fiction books
                { id: 3, title: "1984", author: "George Orwell", price: 11.99, category: "sci-fi", image: "ðŸ”®" },
                { id: 6, title: "Dune", author: "Frank Herbert", price: 15.99, category: "sci-fi", image: "ðŸœï¸" },
                { id: 16, title: "The Hitchhiker's Guide to the Galaxy", author: "Douglas Adams", price: 12.99, category: "sci-fi", image: "ðŸš€" },
                { id: 17, title: "Neuromancer", author: "William Gibson", price: 13.99, category: "sci-fi", image: "ðŸ’»" },
                { id: 18, title: "Foundation", author: "Isaac Asimov", price: 14.99, category: "sci-fi", image: "ðŸŒŒ" },
                { id: 19, title: "The Martian", author: "Andy Weir", price: 16.99, category: "sci-fi", image: "ðŸ”´" },
                
                // Biography books
                { id: 4, title: "Steve Jobs", author: "Walter Isaacson", price: 16.99, category: "biography", image: "ðŸ‘¨â€ðŸ’¼" },
                { id: 10, title: "Einstein: His Life and Universe", author: "Walter Isaacson", price: 18.99, category: "biography", image: "ðŸ§ " },
                { id: 20, title: "Einstein: His Life and Universe", author: "Walter Isaacson", price: 18.99, category: "biography", image: "ðŸ§ " },
                { id: 21, title: "Steve Jobs", author: "Walter Isaacson", price: 16.99, category: "biography", image: "ðŸ‘¨â€ðŸ’¼" },
                { id: 22, title: "The Autobiography of Benjamin Franklin", author: "Benjamin Franklin", price: 12.99, category: "biography", image: "âš¡" },
                
                // Self-Help books
                { id: 23, title: "The Power of Habit", author: "Charles Duhigg", price: 15.99, category: "self-help", image: "ðŸ’ª" },
                { id: 24, title: "Atomic Habits", author: "James Clear", price: 16.99, category: "self-help", image: "âš›ï¸" },
                { id: 25, title: "Mindset: The New Psychology of Success", author: "Carol S. Dweck", price: 14.99, category: "self-help", image: "ðŸ§ " },
                { id: 26, title: "The Subtle Art of Not Giving a F*ck", author: "Mark Manson", price: 13.99, category: "self-help", image: "ðŸ˜Œ" }
            ];
            
            const searchResults = allBooks.filter(book => 
                book.title.toLowerCase().includes(searchTerm) ||
                book.author.toLowerCase().includes(searchTerm) ||
                book.category.toLowerCase().includes(searchTerm)
            );
            
            displaySearchResults(searchResults, searchTerm);
        }

        function displaySearchResults(results, searchTerm) {
            const searchResultsSection = document.getElementById('search-results-section');
            const searchResultsGrid = document.getElementById('search-results-grid');
            
            if (results.length === 0) {
                searchResultsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #666;">
                        <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3>No books found for "${searchTerm}"</h3>
                        <p>Try adjusting your search terms or browse our categories</p>
                    </div>
                `;
            } else {
                searchResultsGrid.innerHTML = results.map(book => `
                    <div class="search-result-card" onclick="addToCart(${book.id})">
                        <div class="search-result-image">
                            <span>${book.image}</span>
                        </div>
                        <div class="search-result-info">
                            <div class="search-result-title">${book.title}</div>
                            <div class="search-result-author">by ${book.author}</div>
                            <div class="search-result-price">$${book.price}</div>
                            <button class="search-result-cta" onclick="event.stopPropagation(); addToCart(${book.id})">
                                ADD TO CART
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Show search results section
            searchResultsSection.style.display = 'block';
            
            // Scroll to search results
            searchResultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function clearSearch() {
            document.getElementById('search-input').value = '';
            document.getElementById('search-clear-btn').style.display = 'none';
            document.getElementById('search-results-section').style.display = 'none';
            
            // Show normal books grid
            if (currentCategory === 'all') {
                displayBooks(books);
            } else {
                const filteredBooks = books.filter(book => book.category === currentCategory);
                displayBooks(filteredBooks);
            }
            
            // Track with Braze
            braze.logCustomEvent('Search Cleared', {
                'current_page': 'home'
            });
        }

        function closeSearchResults() {
            document.getElementById('search-results-section').style.display = 'none';
            document.getElementById('search-input').value = '';
            document.getElementById('search-clear-btn').style.display = 'none';
        }

        function filterByCategory(category) {
            currentCategory = category;
            
            // Track with Braze
            braze.logCustomEvent('Category Filtered', {
                'category': category
            });
            
            // Clear search input when filtering by category
            document.getElementById('search-input').value = '';
            
            if (category === 'all') {
                loadBooks();
            } else {
                const filteredBooks = books.filter(book => book.category === category);
                displayBooks(filteredBooks);
            }
        }

        function displayBooks(booksToDisplay) {
            const booksGrid = document.getElementById('books-grid');
            
            if (booksToDisplay.length === 0) {
                booksGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px; color: #666;">
                        <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3>No books found</h3>
                        <p>Try adjusting your search terms or browse our categories</p>
                    </div>
                `;
            } else {
                booksGrid.innerHTML = booksToDisplay.map(book => `
                    <div class="book-card" onclick="addToCart(${book.id})">
                        <div class="book-image">
                            <span>${book.image}</span>
                        </div>
                        <div class="book-info">
                            <div class="book-title">${book.title}</div>
                            <div class="book-author">by ${book.author}</div>
                            <div class="book-price">$${book.price}</div>
                            <button class="add-to-cart-btn" onclick="event.stopPropagation(); addToCart(${book.id})">
                                ADD TO CART
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function addToCart(bookId) {
            const book = books.find(b => b.id === bookId);
            if (book) {
                const existingItem = cart.find(item => item.id === bookId);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({ ...book, quantity: 1 });
                }
                updateCart();
                
                // Track with Braze
                braze.logCustomEvent('Book Added to Cart', {
                    'book_title': book.title,
                    'book_author': book.author,
                    'book_price': book.price,
                    'book_category': book.category,
                    'cart_total': cart.length
                });
            }
        }

        function updateCart() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            cartCount.textContent = totalItems;
            cartTotal.textContent = `$${totalPrice.toFixed(2)}`;
            
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-image"></div>
                    <div class="cart-item-info">
                        <div class="cart-item-title">${item.title}</div>
                        <div class="cart-item-price">$${item.price} x ${item.quantity}</div>
                    </div>
                </div>
            `).join('');
        }

        function showCart() {
            document.getElementById('cart-sidebar').classList.add('open');
            
            // Track with Braze
            braze.logCustomEvent('Cart Opened', {
                'cart_items': cart.length,
                'cart_total': cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            });
        }

        function hideCart() {
            document.getElementById('cart-sidebar').classList.remove('open');
        }

        function checkout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            
            // Track with Braze
            braze.logPurchase('checkout', 'USD', cart.reduce((sum, item) => sum + (item.price * item.quantity), 0));
            
            alert('Thank you for your purchase!');
            cart = [];
            updateCart();
            hideCart();
        }

        function scrollToFeatured() {
            document.getElementById('featured').scrollIntoView({ behavior: 'smooth' });
        }

        function showUserMenu() {
            // Track with Braze
            braze.logCustomEvent('User Menu Opened');
            alert('User menu functionality coming soon!');
        }

        // Carousel functions
        function setupCarousel() {
            // Create sample content cards for demonstration
            brazeCards = [
                {
                    title: "New Science Fiction Releases",
                    description: "Discover the latest in sci-fi with our handpicked selection of futuristic tales and space adventures.",
                    cta: "Explore Sci-Fi",
                    action: () => window.location.href = 'sci-fi.html'
                },
                {
                    title: "Bestselling Biographies",
                    description: "Read the inspiring stories of remarkable individuals who shaped our world.",
                    cta: "Read Biographies",
                    action: () => window.location.href = 'biography.html'
                },
                {
                    title: "Self-Help Collection",
                    description: "Transform your life with our curated collection of personal development books.",
                    cta: "Start Growing",
                    action: () => window.location.href = 'self-help.html'
                },
                {
                    title: "Fiction Favorites",
                    description: "Escape into captivating stories from award-winning authors across all genres.",
                    cta: "Discover Fiction",
                    action: () => window.location.href = 'fiction.html'
                }
            ];

            if (brazeCards.length > 0) {
                displayCarousel();
                startCarouselAutoPlay();
            }
        }

        function displayCarousel() {
            const carousel = document.getElementById('braze-carousel');
            const indicators = document.getElementById('carousel-indicators');
            
            // Create carousel slides
            carousel.innerHTML = brazeCards.map((card, index) => `
                <div class="carousel-slide ${index === 0 ? 'active' : ''}" data-index="${index}">
                    <div class="carousel-content">
                        <h3>${card.title}</h3>
                        <p>${card.description}</p>
                        <button class="carousel-cta" onclick="handleCarouselAction(${index})">
                            ${card.cta}
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Create indicators
            indicators.innerHTML = brazeCards.map((_, index) => `
                <div class="carousel-indicator ${index === 0 ? 'active' : ''}" 
                     onclick="goToCard(${index})" data-index="${index}"></div>
            `).join('');
        }

        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % brazeCards.length;
            updateCarousel();
            
            // Track with Braze
            braze.logCustomEvent('Carousel Next', {
                'current_index': currentCardIndex,
                'total_cards': brazeCards.length
            });
        }

        function previousCard() {
            currentCardIndex = currentCardIndex === 0 ? brazeCards.length - 1 : currentCardIndex - 1;
            updateCarousel();
            
            // Track with Braze
            braze.logCustomEvent('Carousel Previous', {
                'current_index': currentCardIndex,
                'total_cards': brazeCards.length
            });
        }

        function goToCard(index) {
            currentCardIndex = index;
            updateCarousel();
            
            // Track with Braze
            braze.logCustomEvent('Carousel Indicator Click', {
                'card_index': index,
                'total_cards': brazeCards.length
            });
        }

        function updateCarousel() {
            const slides = document.querySelectorAll('.carousel-slide');
            const indicators = document.querySelectorAll('.carousel-indicator');
            
            slides.forEach((slide, index) => {
                slide.classList.toggle('active', index === currentCardIndex);
            });
            
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentCardIndex);
            });
        }

        function startCarouselAutoPlay() {
            carouselInterval = setInterval(() => {
                nextCard();
            }, 5000); // Auto-advance every 5 seconds
        }

        function stopCarouselAutoPlay() {
            if (carouselInterval) {
                clearInterval(carouselInterval);
            }
        }

        function handleCarouselAction(index) {
            const card = brazeCards[index];
            
            // Track with Braze
            braze.logCustomEvent('Carousel CTA Clicked', {
                'card_title': card.title,
                'card_index': index
            });
            
            // Execute the card action
            if (card.action) {
                card.action();
            }
        }

        // Braze helper functions
        function toggleBrazeCards() {
            setupCarousel(); // Refresh the carousel
            braze.logCustomEvent('Content Cards Refreshed', { 
                'current_category': currentCategory,
                'total_books': books.length
            });
        }
    </script>
</body>
</html>
