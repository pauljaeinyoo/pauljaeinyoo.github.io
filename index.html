<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow - Multi-Account Todo Lists</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Braze SDK -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js');
        }

        +function(a,p,P,b,y){
            a.braze={};a.brazeQueue=[];
            const s="BrazeSdkMetadata DeviceProperties Card Card.prototype.dismissCard Card.prototype.removeAllSubscriptions Card.prototype.removeSubscription Card.prototype.subscribeToClickedEvent Card.prototype.subscribeToDismissedEvent Card.fromContentCardsJson ImageOnly CaptionedImage ClassicCard ControlCard ContentCards ContentCards.prototype.getUnviewedCardCount Feed Feed.prototype.getUnreadCardCount ControlMessage InAppMessage InAppMessage.SlideFrom InAppMessage.ClickAction InAppMessage.DismissType InAppMessage.OpenTarget InAppMessage.ImageStyle InAppMessage.Orientation InAppMessage.TextAlignment InAppMessage.CropType InAppMessage.prototype.closeMessage InAppMessage.prototype.removeAllSubscriptions InAppMessage.prototype.removeSubscription InAppMessage.prototype.subscribeToClickedEvent InAppMessage.prototype.subscribeToDismissedEvent InAppMessage.fromJson FullScreenMessage ModalMessage HtmlMessage SlideUpMessage User User.Genders User.NotificationSubscriptionTypes User.prototype.addAlias User.prototype.addToCustomAttributeArray User.prototype.addToSubscriptionGroup User.prototype.getUserId User.prototype.incrementCustomUserAttribute User.prototype.removeFromCustomAttributeArray User.prototype.removeFromSubscriptionGroup User.prototype.setCountry User.prototype.setCustomLocationAttribute User.prototype.setCustomUserAttribute User.prototype.setDateOfBirth User.prototype.setEmail User.prototype.setEmailNotificationSubscriptionType User.prototype.setFirstName User.prototype.setGender User.prototype.setHomeCity User.prototype.setLanguage User.prototype.setLastKnownLocation User.prototype.setLastName User.prototype.setPhoneNumber User.prototype.setPushNotificationSubscriptionType InAppMessageButton InAppMessageButton.prototype.removeAllSubscriptions InAppMessageButton.prototype.removeSubscription InAppMessageButton.prototype.subscribeToClickedEvent FeatureFlag FeatureFlag.prototype.getStringProperty FeatureFlag.prototype.getNumberProperty FeatureFlag.prototype.getBooleanProperty automaticallyShowInAppMessages destroyFeed hideContentCards showContentCards showFeed showInAppMessage deferInAppMessage toggleContentCards toggleFeed changeUser destroy getDeviceId initialize isPushBlocked isPushPermissionGranted isPushSupported logCardClick logCardDismissal logCardImpressions logContentCardImpressions logContentCardClick logCustomEvent logFeedDisplayed logInAppMessageButtonClick logInAppMessageClick logInAppMessageHtmlClick logInAppMessageImpression logPurchase openSession requestPushPermission removeAllSubscriptions removeSubscription requestContentCardsRefresh requestFeedRefresh refreshFeatureFlags requestImmediateDataFlush enableSDK isDisabled setLogger setSdkAuthenticationSignature addSdkMetadata disableSDK subscribeToContentCardsUpdates subscribeToFeedUpdates subscribeToInAppMessage subscribeToSdkAuthenticationFailures toggleLogging unregisterPush wipeData handleBrazeAction subscribeToFeatureFlagsUpdates getAllFeatureFlags logFeatureFlagImpression"
            .split(" ");
            for (var i = 0; i < s.length; i++) {
                var m = s[i], k = a.braze, l = m.split(".");
                for (var j = 0; j < l.length - 1; j++) k = k[l[j]];
                k[l[j]] = new Function("return function " + m.replace(/\./g, "_") +
                    "(){window.brazeQueue.push(arguments); return true}")();
            }
            y = p.createElement(P);
            y.type = 'text/javascript';
            y.src = 'https://js.appboycdn.com/web-sdk/5.1/braze.min.js';
            y.async = 1;
            b = p.getElementsByTagName(P)[0];
            b.parentNode.insertBefore(y, b);
        }(window, document, 'script');
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

                 .category-section {
             background: white;
             border-radius: 20px;
             padding: 30px;
             box-shadow: 0 20px 40px rgba(0,0,0,0.1);
             margin-bottom: 30px;
             backdrop-filter: blur(10px);
         }

         .category-tabs {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
             gap: 15px;
             margin-bottom: 0;
         }

         .category-tab {
             padding: 15px 20px;
             text-align: center;
             background: #f8f9fa;
             border: 2px solid #e1e5e9;
             border-radius: 12px;
             font-size: 1rem;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
             color: #666;
             display: flex;
             flex-direction: column;
             align-items: center;
             gap: 8px;
         }

         .category-tab i {
             font-size: 1.2rem;
         }

         .category-tab.active {
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
             color: white;
             border-color: #667eea;
             transform: translateY(-2px);
             box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
         }

         .category-tab:hover:not(.active) {
             background: #e9ecef;
             border-color: #667eea;
             transform: translateY(-1px);
         }

         /* Main Navigation Styles */
         .main-nav-section {
             background: white;
             border-radius: 20px;
             padding: 20px;
             box-shadow: 0 20px 40px rgba(0,0,0,0.1);
             margin-bottom: 30px;
             backdrop-filter: blur(10px);
         }

         .main-nav-tabs {
             display: flex;
             gap: 15px;
             justify-content: center;
         }

         .main-nav-tab {
             padding: 15px 30px;
             text-align: center;
             background: #f8f9fa;
             border: 2px solid #e1e5e9;
             border-radius: 12px;
             font-size: 1.1rem;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
             color: #666;
             display: flex;
             align-items: center;
             gap: 10px;
         }

         .main-nav-tab.active {
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
             color: white;
             border-color: #667eea;
             transform: translateY(-2px);
             box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
         }

         .main-nav-tab:hover:not(.active) {
             background: #e9ecef;
             border-color: #667eea;
             transform: translateY(-1px);
         }

         .main-section {
             display: none;
         }

         .main-section.active {
             display: block;
         }

         /* Testing Section Styles */
         .testing-container {
             background: white;
             border-radius: 20px;
             padding: 40px;
             box-shadow: 0 20px 40px rgba(0,0,0,0.1);
         }

         .testing-header {
             text-align: center;
             margin-bottom: 40px;
         }

         .testing-header h2 {
             color: #333;
             margin-bottom: 10px;
         }

         .testing-header p {
             color: #666;
             font-size: 1.1rem;
         }

         .testing-section {
             margin-bottom: 40px;
             padding: 30px;
             background: #f8f9fa;
             border-radius: 15px;
             border-left: 4px solid #667eea;
         }

         .testing-section h3 {
             color: #333;
             margin-bottom: 20px;
             display: flex;
             align-items: center;
             gap: 10px;
         }

         .form-row {
             display: flex;
             gap: 20px;
             margin-bottom: 20px;
             flex-wrap: wrap;
         }

         .form-group {
             flex: 1;
             min-width: 200px;
         }

         .form-group label {
             display: block;
             margin-bottom: 8px;
             font-weight: 600;
             color: #555;
         }

         .form-group input,
         .form-group select,
         .form-group textarea {
             width: 100%;
             padding: 12px;
             border: 2px solid #e1e5e9;
             border-radius: 8px;
             font-size: 1rem;
             transition: border-color 0.3s ease;
             background: white;
         }

         .form-group input:focus,
         .form-group select:focus,
         .form-group textarea:focus {
             outline: none;
             border-color: #667eea;
             box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
         }

         .form-group textarea {
             resize: vertical;
             font-family: 'Courier New', monospace;
         }

         .quick-actions {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
             gap: 15px;
         }

         .quick-actions .action-btn {
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
             color: white;
             border: none;
             padding: 15px 20px;
             border-radius: 10px;
             cursor: pointer;
             font-weight: 600;
             transition: all 0.3s ease;
             display: flex;
             align-items: center;
             justify-content: center;
             gap: 10px;
         }

         .quick-actions .action-btn:hover {
             transform: translateY(-2px);
             box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
         }

         .log-container {
             background: #2d3748;
             border-radius: 10px;
             padding: 20px;
         }

         .activity-log {
             background: #1a202c;
             border-radius: 8px;
             padding: 15px;
             max-height: 300px;
             overflow-y: auto;
             margin-bottom: 15px;
             font-family: 'Courier New', monospace;
             font-size: 0.9rem;
         }

         .log-entry {
             margin-bottom: 8px;
             padding: 5px 0;
             border-bottom: 1px solid #4a5568;
         }

         .log-time {
             color: #48bb78;
             font-weight: bold;
         }

         .log-message {
             color: #e2e8f0;
             margin-left: 10px;
         }

         .btn.secondary {
             background: #6c757d;
         }

         .btn.secondary:hover {
             background: #5a6268;
         }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

                 .app-section {
             display: block;
         }

        .todo-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .todo-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .todo-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            text-align: center;
            min-width: 120px;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .add-todo {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .add-todo input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            min-width: 250px;
        }

        .add-todo input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .add-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .todo-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .todo-list {
            space-y: 15px;
        }

        .todo-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .todo-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .todo-item.completed {
            opacity: 0.7;
            border-left-color: #28a745;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: #6c757d;
        }

        .todo-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #667eea;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .todo-checkbox.checked {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }

                 .todo-text {
             flex: 1;
             font-size: 1.1rem;
             line-height: 1.4;
         }

         .todo-category-badge {
             display: inline-block;
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
             color: white;
             padding: 2px 8px;
             border-radius: 12px;
             font-size: 0.75rem;
             font-weight: 600;
             margin-right: 8px;
             opacity: 0.8;
         }

        .todo-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .edit-btn {
            background: #ffc107;
            color: white;
        }

        .edit-btn:hover {
            background: #ffb300;
            transform: scale(1.1);
        }

        .delete-btn {
            background: #ff6b6b;
            color: white;
        }

        .delete-btn:hover {
            background: #ff5252;
            transform: scale(1.1);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .priority-high { border-left-color: #ff6b6b !important; }
        .priority-medium { border-left-color: #ffc107 !important; }
        .priority-low { border-left-color: #28a745 !important; }

                 .priority-selector, .category-selector {
             margin-left: 10px;
         }

         .priority-selector select, .category-selector select {
             padding: 8px 12px;
             border: 2px solid #e1e5e9;
             border-radius: 6px;
             background: white;
             cursor: pointer;
             font-size: 0.9rem;
         }

         .category-selector select {
             min-width: 120px;
         }

                 @media (max-width: 768px) {
             .container {
                 padding: 15px;
             }
             
             .header h1 {
                 font-size: 2rem;
             }
             
             .main-nav-section, .category-section, .todo-container, .testing-container {
                 padding: 25px;
             }
             
             .main-nav-tabs {
                 flex-direction: column;
                 gap: 10px;
             }
             
             .main-nav-tab {
                 padding: 12px 20px;
                 font-size: 1rem;
             }
             
             .category-tabs {
                 grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                 gap: 10px;
             }
             
             .category-tab {
                 padding: 12px 15px;
                 font-size: 0.9rem;
             }
             
             .add-todo {
                 flex-direction: column;
             }
             
             .add-todo input {
                 min-width: 100%;
             }
             
             .priority-selector, .category-selector {
                 margin-left: 0;
                 margin-top: 10px;
             }
             
             .todo-filters {
                 justify-content: center;
             }
             
             .todo-stats {
                 justify-content: center;
             }
             
             .form-row {
                 flex-direction: column;
             }
             
             .form-group {
                 min-width: 100%;
             }
             
             .quick-actions {
                 grid-template-columns: 1fr;
             }
             
             .testing-section {
                 padding: 20px;
             }
         }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

                 @keyframes slideIn {
             from { transform: translateX(-20px); opacity: 0; }
             to { transform: translateX(0); opacity: 1; }
         }

         /* Braze Content Cards Styles */
         .braze-feed {
             min-height: 200px;
         }

         .braze-controls {
             display: flex;
             gap: 10px;
             flex-wrap: wrap;
         }

         .braze-controls .filter-btn {
             background: #f8f9fa;
             border: 2px solid #e1e5e9;
             padding: 8px 15px;
             border-radius: 20px;
             cursor: pointer;
             transition: all 0.3s ease;
             font-weight: 500;
             font-size: 0.9rem;
         }

         .braze-controls .filter-btn:hover {
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
             color: white;
             border-color: #667eea;
             transform: translateY(-1px);
         }

         /* Braze card overrides */
         .ab-feed .ab-card {
             background: #f8f9fa !important;
             border-radius: 12px !important;
             margin-bottom: 15px !important;
             border-left: 4px solid #667eea !important;
             box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
             transition: all 0.3s ease !important;
         }

         .ab-feed .ab-card:hover {
             transform: translateY(-2px) !important;
             box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
         }

         .ab-feed .ab-card .ab-card-body {
             padding: 20px !important;
         }

         .ab-feed .ab-card .ab-card-title {
             color: #333 !important;
             font-weight: 600 !important;
             margin-bottom: 10px !important;
         }

         .ab-feed .ab-card .ab-card-text {
             color: #666 !important;
             line-height: 1.5 !important;
         }

         .ab-feed .ab-card .ab-pinned-indicator {
             background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
             color: white !important;
             border-radius: 15px !important;
             padding: 4px 12px !important;
             font-size: 0.8rem !important;
         }
     </style>
</head>
<body>
    <div class="container">


        <!-- Main Navigation Tabs -->
        <div class="main-nav-section">
            <div class="main-nav-tabs">
                <button class="main-nav-tab active" onclick="switchMainTab('todo')">
                    <i class="fas fa-tasks"></i> Todo Lists
                </button>
                <button class="main-nav-tab" onclick="switchMainTab('testing')">
                    <i class="fas fa-flask"></i> Braze Testing
                </button>
            </div>
        </div>

        <!-- Todo Section -->
        <div id="todo-section" class="main-section active">
            <!-- Category Selection Section -->
            <div class="category-section">
                <div class="category-tabs">
                    <button class="category-tab active" onclick="switchCategory('all')">
                        <i class="fas fa-list"></i> All Tasks
                    </button>
                    <button class="category-tab" onclick="switchCategory('doordash')">
                        <i class="fas fa-utensils"></i> DoorDash
                    </button>
                    <button class="category-tab" onclick="switchCategory('tripadvisor')">
                        <i class="fas fa-map-marked-alt"></i> TripAdvisor
                    </button>
                    <button class="category-tab" onclick="switchCategory('venmo')">
                        <i class="fas fa-credit-card"></i> Venmo
                    </button>
                    <button class="category-tab" onclick="switchCategory('peacock')">
                        <i class="fas fa-play-circle"></i> Peacock
                    </button>
                    <button class="category-tab" onclick="switchCategory('samsung')">
                        <i class="fas fa-mobile-alt"></i> Samsung
                    </button>
                    <button class="category-tab" onclick="switchCategory('growth')">
                        <i class="fas fa-chart-line"></i> Growth
                    </button>
                    <button class="category-tab" onclick="switchCategory('personal')">
                        <i class="fas fa-user"></i> Personal
                    </button>
                </div>
            </div>

        <!-- App Section -->
        <div id="app-section" class="app-section active">

            <div class="todo-container">
                <div class="todo-header">
                    <h2><i class="fas fa-clipboard-list"></i> My Tasks</h2>
                    <div class="todo-stats">
                        <div class="stat-card">
                            <span class="stat-number" id="total-tasks">0</span>
                            <span class="stat-label">Total</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="completed-tasks">0</span>
                            <span class="stat-label">Completed</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="pending-tasks">0</span>
                            <span class="stat-label">Pending</span>
                        </div>
                    </div>
                </div>

                                 <div class="add-todo">
                     <input type="text" id="new-todo" placeholder="What needs to be done?" maxlength="200">
                     <div class="priority-selector">
                         <select id="todo-priority">
                             <option value="low">Low Priority</option>
                             <option value="medium" selected>Medium Priority</option>
                             <option value="high">High Priority</option>
                         </select>
                     </div>
                     <div class="category-selector">
                         <select id="todo-category">
                             <option value="personal">Personal</option>
                             <option value="doordash">DoorDash</option>
                             <option value="tripadvisor">TripAdvisor</option>
                             <option value="venmo">Venmo</option>
                             <option value="peacock">Peacock</option>
                             <option value="samsung">Samsung</option>
                             <option value="growth">Growth</option>
                         </select>
                     </div>
                     <button class="add-btn" onclick="addTodo()">
                         <i class="fas fa-plus"></i> Add Task
                     </button>
                 </div>

                <div class="todo-filters">
                    <button class="filter-btn active" onclick="filterTodos('all')">All Tasks</button>
                    <button class="filter-btn" onclick="filterTodos('pending')">Pending</button>
                    <button class="filter-btn" onclick="filterTodos('completed')">Completed</button>
                    <button class="filter-btn" onclick="filterTodos('high')">High Priority</button>
                </div>

                                 <div id="todo-list" class="todo-list">
                     <div class="empty-state">
                         <i class="fas fa-clipboard-check"></i>
                         <h3>No tasks yet</h3>
                         <p>Add your first task above to get started!</p>
                     </div>
                 </div>
             </div>
             
             <!-- Braze Content Cards Section -->
             <div class="todo-container" style="margin-top: 30px;">
                 <div class="todo-header">
                     <h2><i class="fas fa-bell"></i> Notifications & Updates</h2>
                     <div class="braze-controls">
                         <button class="filter-btn" onclick="toggleBrazeCards()">
                             <i class="fas fa-sync-alt"></i> Refresh Cards
                         </button>
                         <button class="filter-btn" onclick="hideBrazeCards()">
                             <i class="fas fa-eye-slash"></i> Hide Cards
                         </button>
                         <button class="filter-btn" onclick="showBrazeCards()">
                             <i class="fas fa-eye"></i> Show Cards
                         </button>
                     </div>
                 </div>
                 <div id="braze-feed" class="braze-feed">
                     <div class="empty-state">
                         <i class="fas fa-satellite-dish"></i>
                         <h3>Loading notifications...</h3>
                         <p>Fetching your personalized content</p>
                     </div>
                 </div>
             </div>
         </div>

         <!-- Testing Section -->
         <div id="testing-section" class="main-section">
             <div class="testing-container">
                 <div class="testing-header">
                     <h2><i class="fas fa-flask"></i> Braze SDK Testing</h2>
                     <p>Test custom attributes and events for Braze integration</p>
                 </div>

                 <!-- Custom Attributes Section -->
                 <div class="testing-section">
                     <h3><i class="fas fa-tags"></i> Custom Attributes</h3>
                     <div class="attribute-form">
                         <div class="form-row">
                             <div class="form-group">
                                 <label for="attr-key">Attribute Key:</label>
                                 <input type="text" id="attr-key" placeholder="e.g., user_type, plan_level">
                             </div>
                             <div class="form-group">
                                 <label for="attr-value">Attribute Value:</label>
                                 <input type="text" id="attr-value" placeholder="e.g., premium, gold">
                             </div>
                             <div class="form-group">
                                 <label for="attr-type">Value Type:</label>
                                 <select id="attr-type">
                                     <option value="string">String</option>
                                     <option value="number">Number</option>
                                     <option value="boolean">Boolean</option>
                                     <option value="date">Date</option>
                                 </select>
                             </div>
                         </div>
                         <button class="btn" onclick="setCustomAttribute()">
                             <i class="fas fa-plus"></i> Set Attribute
                         </button>
                     </div>
                 </div>

                 <!-- Custom Events Section -->
                 <div class="testing-section">
                     <h3><i class="fas fa-calendar-check"></i> Custom Events</h3>
                     <div class="event-form">
                         <div class="form-row">
                             <div class="form-group">
                                 <label for="event-name">Event Name:</label>
                                 <input type="text" id="event-name" placeholder="e.g., button_clicked, purchase_completed">
                             </div>
                         </div>
                         <div class="form-group">
                             <label for="event-properties">Event Properties (JSON):</label>
                             <textarea id="event-properties" rows="4" placeholder='{"property1": "value1", "property2": 123, "property3": true}'></textarea>
                         </div>
                         <button class="btn" onclick="logCustomEvent()">
                             <i class="fas fa-paper-plane"></i> Log Event
                         </button>
                     </div>
                 </div>

                 <!-- Quick Actions Section -->
                 <div class="testing-section">
                     <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                     <div class="quick-actions">
                         <button class="action-btn" onclick="logPurchase()">
                             <i class="fas fa-shopping-cart"></i> Log Purchase
                         </button>
                         <button class="action-btn" onclick="changeUser()">
                             <i class="fas fa-user-edit"></i> Change User
                         </button>
                         <button class="action-btn" onclick="requestPushPermission()">
                             <i class="fas fa-bell"></i> Request Push Permission
                         </button>
                         <button class="action-btn" onclick="showInAppMessage()">
                             <i class="fas fa-comment"></i> Show In-App Message
                         </button>
                         <button class="action-btn" onclick="refreshContentCards()">
                             <i class="fas fa-sync"></i> Refresh Content Cards
                         </button>
                         <button class="action-btn" onclick="getDeviceId()">
                             <i class="fas fa-mobile-alt"></i> Get Device ID
                         </button>
                     </div>
                 </div>

                 <!-- Log Section -->
                 <div class="testing-section">
                     <h3><i class="fas fa-list-alt"></i> Activity Log</h3>
                     <div class="log-container">
                         <div id="activity-log" class="activity-log">
                             <div class="log-entry">
                                 <span class="log-time">[System]</span>
                                 <span class="log-message">Braze SDK initialized and ready for testing</span>
                             </div>
                         </div>
                         <button class="btn secondary" onclick="clearLog()">
                             <i class="fas fa-trash"></i> Clear Log
                         </button>
                     </div>
                 </div>
             </div>
         </div>
     </div>

         <script>
         // Application State
         let todos = [];
         let currentCategory = 'all';
         let currentFilter = 'all';

         // Categories configuration
         const categories = {
             all: { name: 'All Tasks', icon: 'fas fa-list' },
             doordash: { name: 'DoorDash', icon: 'fas fa-utensils' },
             tripadvisor: { name: 'TripAdvisor', icon: 'fas fa-map-marked-alt' },
             venmo: { name: 'Venmo', icon: 'fas fa-credit-card' },
             peacock: { name: 'Peacock', icon: 'fas fa-play-circle' },
             samsung: { name: 'Samsung', icon: 'fas fa-mobile-alt' },
             growth: { name: 'Growth', icon: 'fas fa-chart-line' },
             personal: { name: 'Personal', icon: 'fas fa-user' }
         };

         // Initialize the application
         document.addEventListener('DOMContentLoaded', function() {
             loadTodosFromStorage();
             setupEventListeners();
             initializeBraze();
             loadTodos();
         });

         function initializeBraze() {
             // Initialize Braze once the SDK is ready
             braze.initialize('7ad461d4-5c54-45a1-a0f2-c018596c87ca', {
                 baseUrl: "sondheim.braze.com",
                 enableLogging: true,
                 allowUserSuppliedJavascript: true
             });

             braze.toggleLogging();
             braze.changeUser('taskflow_user');
             
             braze.openSession(() => {
                 braze.requestContentCardsRefresh();
                 braze.showContentCards(document.getElementById("braze-feed"));
             });

             // Set user attributes
             const user = braze.getUser();
             user.setCustomUserAttribute('app_name', 'TaskFlow');
             user.setCustomUserAttribute('total_todos', todos.length);
             updateBrazeStats();
         }

         function setupEventListeners() {
             // Add todo on Enter key
             document.getElementById('new-todo').addEventListener('keypress', function(e) {
                 if (e.key === 'Enter') {
                     addTodo();
                 }
             });
         }

         function loadTodosFromStorage() {
             const savedTodos = localStorage.getItem('taskflow_todos');
             if (savedTodos) {
                 todos = JSON.parse(savedTodos);
             }
         }

         function switchMainTab(tab) {
             // Update main nav buttons
             document.querySelectorAll('.main-nav-tab').forEach(btn => btn.classList.remove('active'));
             document.querySelector(`[onclick="switchMainTab('${tab}')"]`).classList.add('active');
             
             // Update sections
             document.querySelectorAll('.main-section').forEach(section => section.classList.remove('active'));
             document.getElementById(`${tab}-section`).classList.add('active');
             
             // Track with Braze
             braze.logCustomEvent('Main Tab Switched', {
                 'tab': tab
             });
         }

         function switchCategory(category) {
             currentCategory = category;
             
             // Update category buttons
             document.querySelectorAll('.category-tab').forEach(btn => btn.classList.remove('active'));
             document.querySelector(`[onclick="switchCategory('${category}')"]`).classList.add('active');
             
             // Update todo category selector to match current category
             if (category !== 'all') {
                 document.getElementById('todo-category').value = category;
             }
             
             // Track with Braze
             braze.logCustomEvent('Category Switched', {
                 'category': category,
                 'category_name': categories[category].name
             });
             
             loadTodos();
         }

                 function addTodo() {
             const todoText = document.getElementById('new-todo').value.trim();
             const priority = document.getElementById('todo-priority').value;
             const category = document.getElementById('todo-category').value;
             
             if (!todoText) {
                 showNotification('Please enter a task', 'error');
                 return;
             }
             
             const newTodo = {
                 id: Date.now().toString(),
                 text: todoText,
                 completed: false,
                 priority: priority,
                 category: category,
                 createdAt: new Date().toISOString()
             };
             
             todos.push(newTodo);
             saveTodos();
             
             // Track with Braze
             braze.logCustomEvent('Todo Added', {
                 'priority': priority,
                 'category': category,
                 'category_name': categories[category].name,
                 'todo_count': todos.length
             });
             
             document.getElementById('new-todo').value = '';
             document.getElementById('todo-priority').value = 'medium';
             
             loadTodos();
             showNotification('Task added successfully!', 'success');
         }

                 function toggleTodo(id) {
             const todo = todos.find(t => t.id === id);
             if (todo) {
                 todo.completed = !todo.completed;
                 saveTodos();
                 
                 // Track with Braze
                 braze.logCustomEvent('Todo Toggled', {
                     'completed': todo.completed,
                     'priority': todo.priority,
                     'category': todo.category,
                     'category_name': categories[todo.category].name
                 });
                 
                 loadTodos();
                 
                 const message = todo.completed ? 'Task completed!' : 'Task marked as pending';
                 showNotification(message, 'success');
             }
         }

                 function deleteTodo(id) {
             if (confirm('Are you sure you want to delete this task?')) {
                 const todoToDelete = todos.find(t => t.id === id);
                 todos = todos.filter(t => t.id !== id);
                 saveTodos();
                 
                 // Track with Braze
                 braze.logCustomEvent('Todo Deleted', {
                     'priority': todoToDelete ? todoToDelete.priority : 'unknown',
                     'category': todoToDelete ? todoToDelete.category : 'unknown',
                     'category_name': todoToDelete ? categories[todoToDelete.category].name : 'unknown',
                     'was_completed': todoToDelete ? todoToDelete.completed : false
                 });
                 
                 loadTodos();
                 showNotification('Task deleted', 'success');
             }
         }

                 function editTodo(id) {
             const todo = todos.find(t => t.id === id);
             if (todo) {
                 const newText = prompt('Edit task:', todo.text);
                 if (newText && newText.trim()) {
                     const oldText = todo.text;
                     todo.text = newText.trim();
                     saveTodos();
                     
                     // Track with Braze
                     braze.logCustomEvent('Todo Edited', {
                         'priority': todo.priority,
                         'category': todo.category,
                         'category_name': categories[todo.category].name,
                         'text_changed': oldText !== newText.trim()
                     });
                     
                     loadTodos();
                     showNotification('Task updated!', 'success');
                 }
             }
         }

                 function filterTodos(filter) {
             currentFilter = filter;
             
             // Track with Braze
             braze.logCustomEvent('Filter Applied', {
                 'filter_type': filter,
                 'current_category': currentCategory
             });
             
             // Update filter buttons
             document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
             event.target.classList.add('active');
             
             loadTodos();
         }

                 function loadTodos() {
             const todoList = document.getElementById('todo-list');
             let filteredTodos = [...todos];
             
             // Apply category filter
             if (currentCategory !== 'all') {
                 filteredTodos = filteredTodos.filter(t => t.category === currentCategory);
             }
             
             // Apply status filter
             switch (currentFilter) {
                 case 'pending':
                     filteredTodos = filteredTodos.filter(t => !t.completed);
                     break;
                 case 'completed':
                     filteredTodos = filteredTodos.filter(t => t.completed);
                     break;
                 case 'high':
                     filteredTodos = filteredTodos.filter(t => t.priority === 'high');
                     break;
             }
             
             // Sort by priority and creation date
             filteredTodos.sort((a, b) => {
                 const priorityOrder = { high: 3, medium: 2, low: 1 };
                 if (priorityOrder[a.priority] !== priorityOrder[b.priority]) {
                     return priorityOrder[b.priority] - priorityOrder[a.priority];
                 }
                 return new Date(b.createdAt) - new Date(a.createdAt);
             });
             
             if (filteredTodos.length === 0) {
                 const categoryName = currentCategory === 'all' ? 'tasks' : `${categories[currentCategory].name} tasks`;
                 todoList.innerHTML = `
                     <div class="empty-state">
                         <i class="fas fa-clipboard-check"></i>
                         <h3>No ${categoryName} found</h3>
                         <p>${currentFilter === 'all' ? `Add your first ${categoryName} above to get started!` : `No ${currentFilter} ${categoryName} found.`}</p>
                     </div>
                 `;
             } else {
                 todoList.innerHTML = filteredTodos.map(todo => `
                     <div class="todo-item ${todo.completed ? 'completed' : ''} priority-${todo.priority} fade-in">
                         <div class="todo-checkbox ${todo.completed ? 'checked' : ''}" onclick="toggleTodo('${todo.id}')">
                             ${todo.completed ? '<i class="fas fa-check"></i>' : ''}
                         </div>
                         <div class="todo-text">
                             <span class="todo-category-badge">${categories[todo.category].name}</span>
                             ${escapeHtml(todo.text)}
                         </div>
                         <div class="todo-actions">
                             <button class="action-btn edit-btn" onclick="editTodo('${todo.id}')" title="Edit">
                                 <i class="fas fa-edit"></i>
                             </button>
                             <button class="action-btn delete-btn" onclick="deleteTodo('${todo.id}')" title="Delete">
                                 <i class="fas fa-trash"></i>
                             </button>
                         </div>
                     </div>
                 `).join('');
             }
             
             updateStats();
         }

                 function updateStats() {
             let relevantTodos = todos;
             if (currentCategory !== 'all') {
                 relevantTodos = todos.filter(t => t.category === currentCategory);
             }
             
             const completed = relevantTodos.filter(t => t.completed).length;
             const pending = relevantTodos.length - completed;
             
             document.getElementById('total-tasks').textContent = relevantTodos.length;
             document.getElementById('completed-tasks').textContent = completed;
             document.getElementById('pending-tasks').textContent = pending;
         }

         function saveTodos() {
             localStorage.setItem('taskflow_todos', JSON.stringify(todos));
             updateBrazeStats();
         }

         function updateBrazeStats() {
             const user = braze.getUser();
             user.setCustomUserAttribute('total_todos', todos.length);
             user.setCustomUserAttribute('completed_todos', todos.filter(t => t.completed).length);
             user.setCustomUserAttribute('high_priority_todos', todos.filter(t => t.priority === 'high').length);
             
             // Category-specific stats
             Object.keys(categories).forEach(category => {
                 if (category !== 'all') {
                     const categoryTodos = todos.filter(t => t.category === category);
                     user.setCustomUserAttribute(`${category}_todos`, categoryTodos.length);
                     user.setCustomUserAttribute(`${category}_completed`, categoryTodos.filter(t => t.completed).length);
                 }
             });
         }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#007bff'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-weight: 500;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

                 // Braze helper functions
         function toggleBrazeCards() {
             braze.toggleContentCards(document.getElementById("braze-feed"));
             braze.logCustomEvent('Content Cards Toggled', { 
                 'current_category': currentCategory,
                 'total_todos': todos.length
             });
         }

         function hideBrazeCards() {
             braze.hideContentCards();
             braze.logCustomEvent('Content Cards Hidden', { 
                 'current_category': currentCategory,
                 'total_todos': todos.length
             });
         }

         function showBrazeCards() {
             braze.showContentCards(document.getElementById("braze-feed"));
             braze.logCustomEvent('Content Cards Shown', { 
                 'current_category': currentCategory,
                 'total_todos': todos.length
             });
         }

         // Testing Functions
         function setCustomAttribute() {
             const key = document.getElementById('attr-key').value.trim();
             const value = document.getElementById('attr-value').value.trim();
             const type = document.getElementById('attr-type').value;

             if (!key || !value) {
                 addLogEntry('Error', 'Please fill in both key and value fields');
                 return;
             }

             try {
                 const user = braze.getUser();
                 let processedValue = value;

                 switch (type) {
                     case 'number':
                         processedValue = parseFloat(value);
                         if (isNaN(processedValue)) {
                             addLogEntry('Error', 'Invalid number value');
                             return;
                         }
                         break;
                     case 'boolean':
                         processedValue = value.toLowerCase() === 'true';
                         break;
                     case 'date':
                         processedValue = new Date(value);
                         if (isNaN(processedValue.getTime())) {
                             addLogEntry('Error', 'Invalid date value');
                             return;
                         }
                         break;
                 }

                 user.setCustomUserAttribute(key, processedValue);
                 addLogEntry('Success', `Set attribute: ${key} = ${processedValue} (${type})`);
                 
                 // Track with Braze
                 braze.logCustomEvent('Custom Attribute Set', {
                     'attribute_key': key,
                     'attribute_value': processedValue,
                     'attribute_type': type
                 });

                 // Clear form
                 document.getElementById('attr-key').value = '';
                 document.getElementById('attr-value').value = '';
                 document.getElementById('attr-type').value = 'string';
             } catch (error) {
                 addLogEntry('Error', `Failed to set attribute: ${error.message}`);
             }
         }

         function logCustomEvent() {
             const eventName = document.getElementById('event-name').value.trim();
             const propertiesText = document.getElementById('event-properties').value.trim();

             if (!eventName) {
                 addLogEntry('Error', 'Please enter an event name');
                 return;
             }

             try {
                 let properties = {};
                 if (propertiesText) {
                     properties = JSON.parse(propertiesText);
                 }

                 braze.logCustomEvent(eventName, properties);
                 addLogEntry('Success', `Logged event: ${eventName} with properties: ${JSON.stringify(properties)}`);

                 // Clear form
                 document.getElementById('event-name').value = '';
                 document.getElementById('event-properties').value = '';
             } catch (error) {
                 addLogEntry('Error', `Failed to log event: ${error.message}`);
             }
         }

         function logPurchase() {
             const productId = prompt('Enter Product ID:', 'test_product_123');
             const price = prompt('Enter Price:', '9.99');
             const currency = prompt('Enter Currency:', 'USD');

             if (productId && price && currency) {
                 braze.logPurchase(productId, currency, parseFloat(price));
                 addLogEntry('Success', `Logged purchase: ${productId} - ${price} ${currency}`);
             }
         }

         function changeUser() {
             const userId = prompt('Enter User ID:', 'test_user_' + Date.now());
             if (userId) {
                 braze.changeUser(userId);
                 addLogEntry('Success', `Changed user to: ${userId}`);
             }
         }

         function requestPushPermission() {
             braze.requestPushPermission((permissionGranted) => {
                 if (permissionGranted) {
                     addLogEntry('Success', 'Push permission granted');
                 } else {
                     addLogEntry('Info', 'Push permission denied');
                 }
             });
         }

         function showInAppMessage() {
             braze.showInAppMessage();
             addLogEntry('Info', 'Requested to show in-app message');
         }

         function refreshContentCards() {
             braze.requestContentCardsRefresh();
             addLogEntry('Info', 'Requested content cards refresh');
         }

         function getDeviceId() {
             braze.getDeviceId((deviceId) => {
                 addLogEntry('Info', `Device ID: ${deviceId}`);
             });
         }

         function addLogEntry(type, message) {
             const logContainer = document.getElementById('activity-log');
             const timestamp = new Date().toLocaleTimeString();
             const logEntry = document.createElement('div');
             logEntry.className = 'log-entry';
             
             const timeSpan = document.createElement('span');
             timeSpan.className = 'log-time';
             timeSpan.textContent = `[${timestamp}]`;
             
             const messageSpan = document.createElement('span');
             messageSpan.className = 'log-message';
             messageSpan.textContent = `${type}: ${message}`;
             
             logEntry.appendChild(timeSpan);
             logEntry.appendChild(messageSpan);
             logContainer.appendChild(logEntry);
             
             // Auto-scroll to bottom
             logContainer.scrollTop = logContainer.scrollHeight;
         }

         function clearLog() {
             const logContainer = document.getElementById('activity-log');
             logContainer.innerHTML = '<div class="log-entry"><span class="log-time">[System]</span><span class="log-message">Log cleared</span></div>';
         }
    </script>
</body>
</html>
